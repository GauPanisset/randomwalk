webpackJsonp([1],{"7zck":function(e,a){},Ll3Q:function(e,a){},NHnr:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=t("7+uW"),n=t("mtWM"),r=t.n(n),i=t("nrd6"),s=t.n(i),l="http://localhost:5000",p={name:"Map",props:["nbFrames","persistence"],data:function(){return{tileLayers:null,map:null,playersLayer:null,zoneLayer:null}},methods:{displayMap:function(e){this.tileLayers[e?0:1].remove(this.map),this.tileLayers[e?1:0].addTo(this.map)},move:function(){var e=this;r.a.get(l+"/moveplayers/"+this.nbFrames).catch(function(e){console.log(e)}),r.a.get(l+"/playerspositions").then(function(a){e.updatePath(a.data,e.playersLayer)}).catch(function(e){console.log(e)})},updatePath:function(e,a){var t=this;a.clearLayers(),e.forEach(function(e){if(t.persistence){var o=[];e.positions.forEach(function(e){o.push(t.map.unproject(s.a.point(e[0]*Math.pow(2,t.map.getZoom()-2),e[1]*Math.pow(2,t.map.getZoom()-2))))});var n="rgb("+e.color[0]+","+e.color[1]+","+e.color[2]+")";s.a.polyline(o,{color:n}).addTo(a)}else{var r="rgb("+e.color[0]+","+e.color[1]+","+e.color[2]+")",i=e.positions[e.positions.length-1];s.a.circle(t.map.unproject(s.a.point(i[0]*Math.pow(2,t.map.getZoom()-2),i[1]*Math.pow(2,t.map.getZoom()-2))),{radius:.5,fill:!0,opacity:1,color:r}).addTo(t.playersLayer)}})},clear:function(){r.a.get(l+"/resetzone").catch(function(e){console.log(e)}),r.a.get(l+"/resetplayers").catch(function(e){console.log(e)}),this.playersLayer.clearLayers(),this.zoneLayer.clearLayers()},drawZone:function(){var e=this;this.zoneLayer.clearLayers(),r.a.get(l+"/zoneposition").then(function(a){var t=a.data.center;s.a.circle(e.map.unproject(s.a.point(t[0]*Math.pow(2,e.map.getZoom()-2),t[1]*Math.pow(2,e.map.getZoom()-2))),{radius:100*a.data.radius/a.data.first,fill:!1,opacity:1,color:"red"}).addTo(e.zoneLayer)}).catch(function(e){console.log(e)})}},mounted:function(){var e=s.a.map("map",{dragging:!1,crs:s.a.CRS.Simple}).setView([-100,150],2);this.map=e,this.tileLayers=[s.a.tileLayer("",{minZoom:1,maxZoom:6,attribution:"fortnite-map",tms:!1,noWrap:!0}),s.a.tileLayer("https://oyster.ignimgs.com/ignmedia/wikimaps/fortnite/season-8/{z}/{x}-{y}.jpg",{minZoom:1,maxZoom:6,attribution:"fortnite-map",tms:!1,noWrap:!0})],this.tileLayers[0].addTo(e),this.playersLayer=s.a.layerGroup(),this.map.addLayer(this.playersLayer),this.zoneLayer=s.a.layerGroup(),this.map.addLayer(this.zoneLayer);var a=this;e.on("click",function(e){var t=a.map.project(e.latlng);console.log(s.a.point(t.x/Math.pow(2,a.map.getZoom()-2),t.y/Math.pow(2,a.map.getZoom()-2)))})}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"map-container"}},[t("div",{attrs:{id:"map"}}),e._v(" "),t("div",{staticClass:"text-xs-center"},[t("v-btn",{attrs:{color:"info"},on:{click:e.drawZone}},[e._v("Display Zone")]),e._v(" "),t("v-btn",{attrs:{color:"success"},on:{click:e.move}},[e._v("Move")]),e._v(" "),t("v-btn",{attrs:{color:"error"},on:{click:e.clear}},[e._v("Clear")])],1)])},staticRenderFns:[]};var m={data:function(){return{clipped:!0,drawer:!1,fixed:!1,items:[],right:!0,rightDrawer:!1,title:"Fortnite Random Walk",nbFrames:100,persistence:!0,mapDisplay:!1}},name:"App",components:{Map:t("VU/8")(p,c,!1,function(e){t("Ll3Q")},"data-v-235753b8",null).exports},methods:{sendMapEvent:function(){this.$refs.mapComponent.displayMap(this.mapDisplay)}},mounted:function(){}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-app",[t("v-navigation-drawer",{staticStyle:{"z-index":"10000"},attrs:{persistent:"",clipped:e.clipped,"enable-resize-watcher":"",fixed:"",app:""},model:{value:e.drawer,callback:function(a){e.drawer=a},expression:"drawer"}},[t("v-form",{staticStyle:{margin:"50px 20px"}},[t("v-text-field",{attrs:{label:"How many frames by move click ?",placeholder:"Integer"},model:{value:e.nbFrames,callback:function(a){e.nbFrames=a},expression:"nbFrames"}}),e._v(" "),t("v-switch",{attrs:{label:"Persistence"},model:{value:e.persistence,callback:function(a){e.persistence=a},expression:"persistence"}}),e._v(" "),t("v-switch",{attrs:{label:"Display map"},on:{change:e.sendMapEvent},model:{value:e.mapDisplay,callback:function(a){e.mapDisplay=a},expression:"mapDisplay"}})],1)],1),e._v(" "),t("v-toolbar",{staticStyle:{"z-index":"10000"},attrs:{app:"","clipped-left":e.clipped}},[t("v-toolbar-side-icon",{on:{click:function(a){a.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),t("v-toolbar-title",{domProps:{textContent:e._s(e.title)}}),e._v(" "),t("v-spacer"),e._v(" "),t("v-toolbar-items",{staticClass:"modify-tool"})],1),e._v(" "),t("v-content",[t("Map",{ref:"mapComponent",attrs:{"nb-frames":e.nbFrames,persistence:e.persistence}})],1),e._v(" "),t("v-footer",{attrs:{fixed:e.fixed,app:""}})],1)},staticRenderFns:[]},u=t("VU/8")(m,d,!1,null,null,null).exports,v=t("3EgV"),f=t.n(v);t("7zck");o.default.use(f.a),o.default.config.productionTip=!1,new o.default({el:"#app",components:{App:u},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.f7a0c5fe66c17f58cd87.js.map